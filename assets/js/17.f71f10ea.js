(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{301:function(a,s,t){"use strict";t.r(s);var e=t(10),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"端口转发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#端口转发"}},[a._v("#")]),a._v(" 端口转发")]),a._v(" "),s("h2",{attrs:{id:"功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#功能"}},[a._v("#")]),a._v(" 功能")]),a._v(" "),s("p",[a._v("用于将远程端口映射到本地，支持通过多层代理来映射表目标服务。")]),a._v(" "),s("h2",{attrs:{id:"直接映射端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#直接映射端口"}},[a._v("#")]),a._v(" 直接映射端口")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ turbo-tunnel "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" tcp://127.0.0.1:3344 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" tcp://www.qq.com:80\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("这样可以将"),s("code",[a._v("www.qq.com:80")]),a._v("映射到本地的"),s("code",[a._v("127.0.0.1:3344")]),a._v("。因此，可以使用"),s("code",[a._v('curl http://127.0.0.1:3344/ -H "Host: www.qq.com"')]),a._v("来访问QQ首页。")]),a._v(" "),s("h2",{attrs:{id:"通过隧道映射端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过隧道映射端口"}},[a._v("#")]),a._v(" 通过隧道映射端口")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ turbo-tunnel "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" tcp://127.0.0.1:3344 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" http://web-proxy.com:8080 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" tcp://www.qq.com:80\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("这里是通过https代理隧道来映射端口，一般用于需要通过代理服务器访问外网的场景。")]),a._v(" "),s("h2",{attrs:{id:"通过多层嵌套代理映射端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过多层嵌套代理映射端口"}},[a._v("#")]),a._v(" 通过多层嵌套代理映射端口")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ turbo-tunnel "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" tcp://127.0.0.1:3344 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" http://web-proxy.com:8080 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" ssh://1.1.1.1:2222/ "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" tcp://192.168.1.1:80\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("这样可以通过"),s("code",[a._v("https")]),a._v("和"),s("code",[a._v("ssh")]),a._v("两层嵌套代理来映射端口。这种情况一般是"),s("code",[a._v("ssh")]),a._v("服务器上部署了一个跳板机服务，需要通过该跳板机才能访问目标网络，例如这里的："),s("code",[a._v("192.168.1.1")]),a._v("；而访问ssh服务又需要通过https代理。")]),a._v(" "),s("h2",{attrs:{id:"映射ssl端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#映射ssl端口"}},[a._v("#")]),a._v(" 映射SSL端口")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ turbo-tunnel "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" tcp://127.0.0.1:3344 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" ssl://www.qq.com:443\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("这样可以在本地直接访问明文服务，隧道会自动进行SSL加密。例如，这里可以使用"),s("code",[a._v('curl http://127.0.0.1:3344/ -H "Host: www.qq.com"')]),a._v("访问"),s("code",[a._v("www.qq.com:443")]),a._v("的https服务。")]),a._v(" "),s("p",[a._v("对于域名解析非预期的场景，可以使用"),s("code",[a._v("ssl://1.1.1.1:443/?server_hostname=www.qq.com")]),a._v("来指定证书域名。对于自签名证书，可以使用"),s("code",[a._v("ssl://1.1.1.1:443/?verify_ssl=false")]),a._v("来禁用证书校验。")]),a._v(" "),s("blockquote",[s("p",[a._v("端口映射时，最后一个tunnel一定是"),s("code",[a._v("tcp://")]),a._v("或"),s("code",[a._v("ssl://")]),a._v("类型的。")])])])}),[],!1,null,null,null);s.default=r.exports}}]);