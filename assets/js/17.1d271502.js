(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{292:function(s,t,a){"use strict";a.r(t);var e=a(10),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"端口转发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端口转发"}},[s._v("#")]),s._v(" 端口转发")]),s._v(" "),t("h2",{attrs:{id:"功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能"}},[s._v("#")]),s._v(" 功能")]),s._v(" "),t("p",[s._v("用于将远程端口映射到本地，支持通过多层代理来映射表目标服务。")]),s._v(" "),t("h2",{attrs:{id:"直接映射端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#直接映射端口"}},[s._v("#")]),s._v(" 直接映射端口")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ turbo-tunnel -l tcp://127.0.0.1:3344 -t tcp://www.qq.com:80\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这样可以将"),t("code",[s._v("www.qq.com:80")]),s._v("映射到本地的"),t("code",[s._v("127.0.0.1:3344")]),s._v("。因此，可以使用"),t("code",[s._v('curl http://127.0.0.1:3344/ -H "Host: www.qq.com"')]),s._v("来访问QQ首页。")]),s._v(" "),t("h2",{attrs:{id:"通过隧道映射端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过隧道映射端口"}},[s._v("#")]),s._v(" 通过隧道映射端口")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ turbo-tunnel -l tcp://127.0.0.1:3344 -t http://web-proxy.com:8080 -t tcp://www.qq.com:80\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这里是通过https代理隧道来映射端口，一般用于需要通过代理服务器访问外网的场景。")]),s._v(" "),t("h2",{attrs:{id:"通过多层嵌套代理映射端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过多层嵌套代理映射端口"}},[s._v("#")]),s._v(" 通过多层嵌套代理映射端口")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ turbo-tunnel -l tcp://127.0.0.1:3344 -t http://web-proxy.com:8080 -t ssh://1.1.1.1:2222/ -t tcp://192.168.1.1:80\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这样可以通过"),t("code",[s._v("https")]),s._v("和"),t("code",[s._v("ssh")]),s._v("两层嵌套代理来映射端口。这种情况一般是"),t("code",[s._v("ssh")]),s._v("服务器上部署了一个跳板机服务，需要通过该跳板机才能访问目标网络，例如这里的："),t("code",[s._v("192.168.1.1")]),s._v("；而访问ssh服务又需要通过https代理。")]),s._v(" "),t("h2",{attrs:{id:"映射ssl端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#映射ssl端口"}},[s._v("#")]),s._v(" 映射SSL端口")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ turbo-tunnel -l tcp://127.0.0.1:3344 -t ssl://www.qq.com:443\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这样可以在本地直接访问明文服务，隧道会自动进行SSL加密。例如，这里可以使用"),t("code",[s._v('curl http://127.0.0.1:3344/ -H "Host: www.qq.com"')]),s._v("访问"),t("code",[s._v("www.qq.com:443")]),s._v("的https服务。")]),s._v(" "),t("p",[s._v("对于域名解析非预期的场景，可以使用"),t("code",[s._v("ssl://1.1.1.1:443/?server_hostname=www.qq.com")]),s._v("来指定证书域名。对于自签名证书，可以使用"),t("code",[s._v("ssl://1.1.1.1:443/?verify_ssl=false")]),s._v("来禁用证书校验。")]),s._v(" "),t("blockquote",[t("p",[s._v("端口映射时，最后一个tunnel一定是"),t("code",[s._v("tcp://")]),s._v("或"),t("code",[s._v("ssl://")]),s._v("类型的。")])])])}),[],!1,null,null,null);t.default=r.exports}}]);