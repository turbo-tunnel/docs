(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{296:function(a,t,s){"use strict";s.r(t);var e=s(10),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"icmp隧道"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#icmp隧道"}},[a._v("#")]),a._v(" ICMP隧道")]),a._v(" "),t("h2",{attrs:{id:"功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能"}},[a._v("#")]),a._v(" 功能")]),a._v(" "),t("ul",[t("li",[a._v("ICMP隧道服务端")]),a._v(" "),t("li",[a._v("ICMP隧道客户端")]),a._v(" "),t("li",[a._v("支持穿越NAT")]),a._v(" "),t("li",[a._v("支持多路复用")])]),a._v(" "),t("h2",{attrs:{id:"使用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[a._v("#")]),a._v(" 使用场景")]),a._v(" "),t("p",[a._v("通常使用的隧道协议一般都是基于"),t("code",[a._v("TCP")]),a._v("或"),t("code",[a._v("UDP")]),a._v("，但是这两种协议在某些特殊网络情况下可能无法使用（防火墙之类的限制）。而此时ICMP协议可能是放行的（除非是物理隔绝的网络），这种情况下可以考虑使用ICMP隧道。")]),a._v(" "),t("p",[a._v("但受限于"),t("code",[a._v("NAT")]),a._v("的限制，ICMP隧道没法实现真正意义上的全双工通信，因此在较大数据量的场景下稳定性可能会有些问题。如果对通信隧道有性能及稳定性要求的场景，建议优先考虑其它隧道类型（如：WebSocket隧道、SSH隧道等），只在其它协议都没法适用的场景下，才考虑使用ICMP隧道。")]),a._v(" "),t("p",[a._v("如果想了解ICMP隧道更多实现原理，可以参见："),t("a",{attrs:{href:"https://www.drunkdream.com/2022/05/05/icmp-tunnel-through-nat/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://www.drunkdream.com/2022/05/05/icmp-tunnel-through-nat/"),t("OutboundLink")],1),a._v("。")]),a._v(" "),t("h2",{attrs:{id:"icmp隧道服务端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#icmp隧道服务端"}},[a._v("#")]),a._v(" ICMP隧道服务端")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" turbo-tunnel "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" icmp://:8000/\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("ICMP协议本身并没有端口的概念，这里的"),t("code",[a._v("8000")]),a._v("是在隧道层协议中自己实现的，这样可以支持在一台主机上启动多个隧道服务端。")]),a._v(" "),t("h2",{attrs:{id:"icmp隧道客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#icmp隧道客户端"}},[a._v("#")]),a._v(" ICMP隧道客户端")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" turbo-tunnel "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" http://127.0.0.1:8080 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" icmp://1.1.1.1:8000\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[t("code",[a._v("1.1.1.1")]),a._v("为ICMP隧道服务端IP。可以看出，客户端使用方法与其它隧道类型基本一致。")]),a._v(" "),t("blockquote",[t("p",[a._v("不过，ICMP隧道目前尚不支持与其它隧道嵌套使用")])])])}),[],!1,null,null,null);t.default=r.exports}}]);