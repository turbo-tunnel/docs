(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{304:function(t,a,s){"use strict";s.r(a);var e=s(10),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"websocket隧道"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#websocket隧道"}},[t._v("#")]),t._v(" WebSocket隧道")]),t._v(" "),a("h2",{attrs:{id:"功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能"}},[t._v("#")]),t._v(" 功能")]),t._v(" "),a("p",[t._v("提供WebSocket隧道服务端和客户端能力。")]),t._v(" "),a("h2",{attrs:{id:"websocket隧道服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#websocket隧道服务端"}},[t._v("#")]),t._v(" WebSocket隧道服务端")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ turbo-tunnel "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" ws://username:password@127.0.0.1/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("addr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("此命令可以创建WebSocket隧道服务端，其中"),a("code",[t._v("{addr}")]),t._v("和"),a("code",[t._v("{port}")]),t._v("在这里是变量占位符，用于指示目标地址和目标端口参数。")]),t._v(" "),a("blockquote",[a("p",[t._v("这是因为WebSocket协议本身并不是一种标准的隧道协议，因此需要使用特定的字段来指定目标地址信息。")])]),t._v(" "),a("p",[t._v("运行过程中，当需要访问"),a("code",[t._v("1.1.1.1:8888")]),t._v("服务时，客户端会动态生成请求路径："),a("code",[t._v("/1.1.1.1/8888")]),t._v("。")]),t._v(" "),a("p",[t._v("这里可以根据使用者的需要改成不同的格式，例如："),a("code",[t._v("/proxy-{addr}-{port}")]),t._v("或"),a("code",[t._v("/proxy?addr={addr}&port={port}")]),t._v("。但是，这里设置的格式需要与客户端指定的url格式保持一致。")]),t._v(" "),a("h2",{attrs:{id:"websocket隧道客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#websocket隧道客户端"}},[t._v("#")]),t._v(" WebSocket隧道客户端")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ turbo-tunnel "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" http://:8080/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" ws://username:password@127.0.0.1/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("addr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("该命令会创建一个HTTPS代理服务端，并通过WebSocket隧道"),a("code",[t._v("ws://username:password@127.0.0.1/{addr}/{port}")]),t._v("转发所有流量。")]),t._v(" "),a("h2",{attrs:{id:"使用wss协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用wss协议"}},[t._v("#")]),t._v(" 使用WSS协议")]),t._v(" "),a("p",[t._v("turbo-tunnel本身没有提供SSL服务端支持，需要使用者在外面套一层"),a("code",[t._v("nginx")]),t._v("之类的Web容器来支持SSL，这也是推荐的使用方法。")])])}),[],!1,null,null,null);a.default=r.exports}}]);